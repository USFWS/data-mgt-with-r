<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R tools for a code-based data workflow</title>
    <meta charset="utf-8" />
    <meta name="author" content="McCrea Cobb and Adam Smith" />
    <meta name="date" content="2020-06-21" />
    <link href="libs/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link href="libs/leaflet/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet/leaflet.js"></script>
    <link href="libs/leafletfix/leafletfix.css" rel="stylesheet" />
    <script src="libs/Proj4Leaflet/proj4-compressed.js"></script>
    <script src="libs/Proj4Leaflet/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding/leaflet.js"></script>
    <link rel="stylesheet" href="css\xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="css\my-theme.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">








class: hide-logo, center, middle, inverse
# ![:scale 9%](images/Rlogo.svg) Tools for a Code-based Data Workflow

.pull-left[
`McCrea Cobb`  
<i class="fas  fa-envelope "></i> mccrea_cobb@fws.gov  
<i class="fas  fa-phone "></i> 907-786-3403  
<i class="fab  fa-github "></i> mccrea.cobb  
]

.pull-right[
`Adam D. Smith`  
<i class="fas  fa-envelope "></i> adam_d_smith@fws.gov  
<i class="fas  fa-phone "></i> 706-425-2197  
<i class="fab  fa-github "></i> adamdsmith  
]

&lt;br&gt;

<i class="fab  fa-github "></i> usfws.github.io/data-mgt-with-r/


???
Hello and welcome to Tools for a Code-based Data Workflow. 

My name is McCrea Cobb. I work as a biometrician in the Inventory and Monitoring Program within the National Wildlife Refuge Sytem, and I am located in Anchorage, Alaska. I am co-presenting with Adam Smith, who is quantitative ecologist with the I&amp;M program based in Athens, Georgia.

You can find our presentation slides at the link at the bottom.


---
class: inverse, center, middle, hide-logo
# Outline


???
I'll start out by providing a brief outline of what we will be covering today.


---
class: inverse, center, middle, hide-logo
# Outline

.left[.pull-right-70[
#### Review the data life cycle and data workflow
]
]


???
First, we will review some of the concepts introduced earlier today by Jared and Maren. We will provide a cursory review of the data and project life cycles and how these models fit into scientific data workflows. We will compare what we're calling the "traditional" workflow that typically involves manually manipulating data with "point and clicks" using propritary software to a code-based data workflow in R.


---
class: inverse, center, middle, hide-logo
# Outline

.left[.pull-right-70[

&lt;span style="color:gray"&gt;Review the data life cycle and data workflow&lt;/span&gt;

#### Present tools in ![:scale 3%](images/Rlogo.svg) for efficiently and effectively working with data along the life cycle
]
]


???
Next, we will use steps of a data life cycle, from Planning to Archiving, as a guide to  present tools and tips for developing a data workflow in R, a programming language for statistical computing and graphics.


---
class: inverse, center, middle, hide-logo
# Outline

.left[.pull-right-70[
&lt;span style="color:gray"&gt;Review the data life cycle and data workflow&lt;/span&gt;

&lt;span style="color:gray"&gt;Present some tools in ![:scale 3%](images/Rlogo.svg) for efficiently and effectively working with data along the life cycle&lt;/span&gt;

#### Demonstrate a data workflow in ![:scale 3%](images/Rlogo.svg) using an example project
]
]


???
Finally, we will demonstrate of how these tools and concepts can be applied to real-world data, using a FWS survey case study focused on mobile acoustical bat monitoring from southeastern US.

Our focus is limited to scientific data, but the tools and tips that we cover apply to a wide range of data.


---
background-image: url(images/draw_owl-kosher.jpg)
background-size: contain
class: hide-logo

???
Before starting though, we wanted to include a disclaimer. It can be frustrating trying to learn a new language like R. Much like learning to draw well, you cannot learn R in a hour and a half. If we tried to do this, it might come around like this image. 

-So, with our limited time, we decided to focus on the application of R to a data work. This webinar is not an "Introduction to R" or a "How to get your data into R" or "Learn the Tidyverse".

- Our take home message is simply: It is possible to use a scripting languaging like R to complete a scientific data workflow that largely mirrors the data life cycle. Taking this approach has many advantages: including, it is efficient, reproducible, and less error prone than a point and click data workflow.

  - If you are interested in learning R, there are many courses that cover these materials, from online courses from DataCamp or in-person courses through NCTC courses (CSP1004 Data Wrangling in R)
  
  - We have included links in the slides to additional resources and we encourage you to visit our github site where there are many more additional resources listed.


---
# Project and data life cycles

.center[![:scale 80%](images/life_cycles.png)]


???
- As I mentioned, we will follow the project and data life cycles that Jared and Maren introduced in the previous webinar on data management as our guide for introducing R tools. 
- As you can see here, both the data and project life cycles start with a **Planning** step, and so we will start with recommended actions that we think should be considered during the planning step and cover some associated tools in R.


---
background-image: url(images/life_cycles-data.png)
background-size: 90%
class: hide-logo


???
- After that, we will progress through th rest of the data life cycle: starting with the Acquire step, and moving through the Process, Analyze, Share and Achive steps. We will also cover documenting in R.


---
class: hide-logo
# <i class="fas  fa-times " style="color:red;"></i> Traditional data workflow


???
Ok. So how are these steps typically accomplished? Let's first walk through the traditional point and click data workflow that is probably familiar to everybody here.


---
background-image: url(images/traditional_workflow_1.png)
background-size: 90%
class: hide-logo
# <i class="fas  fa-times " style="color:red;"></i> Traditional data workflow


???
First, you start with data. These could be paper datasheets, maybe some data that were collected using a mobile app like Collector or Survey123, or data that you found in a online repository like ServCat or data.gov. 


---
background-image: url(images/traditional_workflow_2.png)
background-size: 90%
class: hide-logo
# <i class="fas  fa-times " style="color:red;"></i> Traditional data workflow


???
The first step is to acquire these data. This is generally done by digitizing paper data into Excel,  Access or ArcGIS, and downloading data from a repository by navigating to a webpage in Chrome and clicking on button. 


---
background-image: url(images/traditional_workflow_3.png)
background-size: 90%
class: hide-logo
# <i class="fas  fa-times " style="color:red;"></i> Traditional data workflow


???
Next, these data are processed and quality-checked using these same software. Occasionally, people might load data into R, process the data in R and then export the clean dataset back as a csv, giving it a new name like "data_clean" for version control and to differentiate it from the raw data.


---
background-image: url(images/traditional_workflow_4.png)
background-size: 90%
class: hide-logo
# <i class="fas  fa-times " style="color:red;"></i> Traditional data workflow


???
The third step is data analysis. For spatial data, this step is often done in ArcGIS. For exploratory data analysis of non-spatial data, this might be a accomplished using Excel or Access. More complex analyses might require the user to convert the data to a csv, load it into R, run from models, and write CSV table of results. 


---
background-image: url(images/traditional_workflow_5.png)
background-size: 90%
class: hide-logo
# <i class="fas  fa-times " style="color:red;"></i> Traditional data workflow


???
Reporting these results requires the user to write summary text in a Word document or in Powerpoint slides. ArcGIS, Excel, and R are generally used to create figures that are often saved as JPGs. 


---
background-image: url(images/traditional_workflow_6.png)
background-size: 90%
class: hide-logo
# <i class="fas  fa-times " style="color:red;"></i> Traditional data workflow <i class="fas  fa-frown-open "></i>


???
Finally, to complete the report or presentation slides, the user is required to manually copy and paste the JPG figures into Word or Powerpoint.


---
class: center, middle, hide-logo

![](images/criteria_short.png)


???
How do we evaluate whether this is a "good" data workflow?

To do this, we need criteria from which to measure success. You can probably imagine a long list of these, but for this webinar, we'll focus on these six.

A good data workflow should maximize the criteria listed here. 

Let's evaluate the traditional data workflow using these criteria. 
 
- First, is it is reproducible? Not really. If someone else were attempting to reproduce this effort, they might not know which data were used to generate the figures and tables and they are even less likely to be able to replicate all the steps in the workflow. 

- Is it replicable by the person that completed the workflow? Unlikely. The person that completed the workflow might have trouble replicating the steps for the next year's annual report.

- Is it efficient? Perhaps for a single one-off project, but not for any long-term data collection effort. Almost all these steps have to be repeated to reproduce the results with new data.

- Is it standardized? No, even small details like the sizes of figures is likely differ between analyses.

- Is it scalable. No. Every time that new data are generated or the original data change, then the workflow breaks and needs to be restarted, sometimes from scratch. 
    
    
---
class: center, middle, hide-logo

![](images/criteria_short_xed.png)


???
boo..


---
background-image: url(images/workflow.gif)
background-size: contain
class: hide-logo


???
- What we need is a seamless workflow like this, where the data go from acquiring (i.e. hand) to process (and archiving).
- Your code should be the source of your products (report, etc). 


---
class: hide-logo
# <i class="fas  fa-check " style="color:green;"></i> ![:scale 7%](images/Rlogo.svg) data workflow 


???
So how does this compare to a code-based workflow?


---
background-image: url(images/r_workflow_1.png)
background-size: 90%
class: hide-logo
# <i class="fas  fa-check " style="color:green;"></i> ![:scale 7%](images/Rlogo.svg) data workflow 


???
The input data are often the same, although eliminating paper datasheets can eliminates transcription error and, as Adam will touch on later, allows us to acquire data in R directly through ArcGIS Online's API.


---
background-image: url(images/r_workflow_3.png)
background-size: 90%
class: hide-logo
# <i class="fas  fa-check " style="color:green;"></i> ![:scale 7%](images/Rlogo.svg) data workflow


???
As we will show, R can directly import data from a variety of sources. This is now easier than ever thanks to a number of R package that include flexible data import functions, including spatial data.


---
background-image: url(images/r_workflow_5.png) 
background-size: 90%
class: hide-logo
# <i class="fas  fa-check " style="color:green;"></i> ![:scale 7%](images/Rlogo.svg) data workflow


???
R offers a number of tools for quality control, including both passive data profiling and active assertive programming approaches. More to come on that. Where R starts to really shin tidying up mess data and there are a whole suite of packages called the "tidyverse" that address this step.


---
background-image: url(images/r_workflow_6.png)
background-size: 90%
class: hide-logo
# <i class="fas  fa-check " style="color:green;"></i> ![:scale 7%](images/Rlogo.svg) data workflow


???
R was originally developed as a statistical software and there are now too many packages to even start listing that allow for a ever growing number of analytical approaches.


---
background-image: url(images/r_workflow_8.png)
background-size: 90%
class: hide-logo
# <i class="fas  fa-check " style="color:green;"></i> ![:scale 7%](images/Rlogo.svg) data workflow


???
Maybe less known is the ability to generate reports using a mixture of text and R code. Recently, a number of packages have been developed to address this need that we will touch on.


---
background-image: url(images/r_workflow_9.png)
background-size: 90%
class: hide-logo
# <i class="fas  fa-check " style="color:green;"></i> ![:scale 7%](images/Rlogo.svg) data workflow


???
These code-based reports can be output in number of file format, including html, PDF and Word documents. Even more importantly, it is possible to archive these data and data products back to repositories from R, thereby closing the data life cycle loop. 


---
background-image: url(images/r_workflow_10.png)
background-size: 90%
class: hide-logo
# <i class="fas  fa-check " style="color:green;"></i> ![:scale 7%](images/Rlogo.svg) data workflow <i class="fas  fa-grin-stars "></i>


???
Last but not least, by coding these steps all within an R environment, it is possible to wrap up these steps into a reusable R package. 


---
background-image: url(images/Rlogo.svg)
class: hide-logo, middle, right
background-size: 40%
background-position: 10% 50%

![:scale 50%](images/rstudio_logo.png)


???
This presentation focuses on R and RStudio, which is a integrated development environment (IDE) for R to develop and share work.

- Why R?
  - Free for everybody
  - Relatively easy to learn (compared to other programming languages)
  - Powerful
  - Flexible
    - statistical analyses
    - graphics
    - reporting
  - Nice free integrated development environment (RStudio)
  - Popular (2 millions users)
      - Active community of users
      - package development - currently over 15,000 packages
  - GitHub integration


---
class: center, middle, inverse

# Planning
![](images/life_cycles-data_planning.png)


???
Ok. Let's get with the first step: Planning 


---
# Organizing an ![:scale 7%](images/Rlogo.svg) project 

### <i class="fas  fa-sitemap "></i> Chose a standardized working directory structure

.pull-left[
Provides consistent relative directory paths for your scripts

- R packages provide functions to create a standard file directory:
    - [`MakeProject::MakeProject()`](https://cran.r-project.org/web/packages/makeProject/index.html)
    - [`rrtools::use_analysis()`](https://www.rdocumentation.org/packages/rrtools/versions/0.1.0)
    - [`refugetools::create.dir()`](https://github.com/USFWS/refugetools)
    - [`prodigenr::setup_project()`](https://cran.r-project.org/web/packages/prodigenr/readme/README.html)

  
]

.pull-right[
An example directory structure:

```r
project_name/
  admin/
* code/
    functions/
* data/
    derived_data/
    raw_data/
  incoming/
  metadata/
  output/
    figures/
    raw_analysis/
    tables/
  products/
* resources/
    data/ 
    publications/
    reports/
```
]


???
There are many decision that need to be made when starting project involving data. Perhaps one of the first is how to organize your work. While not necessarily a data management issue, having a standardized project directory has advantages when using a code-based workflow.

- Project-oriented workflows are self-contained workflows enabling reproducibility and replicability. Ideally a collaborator or the next biologists should be able to run the entire project without changing any code or files. File paths should be workstation-independent. 

- R has options for enabling self-contained workflows in their coding environments, and RStudio projects allow for analyses to be contained in a single working directory that can be given to a collaborator and run without changing file directory paths. 

- The figure on the right shows an example of a working directory file structure. Notice that all data produced by the project are stored in a folder called data. Centralizing data like this makes the file paths in R consistent, and it also makes it easier to 

- There are tools in R that produce a standardized directory structure. We don't have time today to go into detail about each of these, but there are links here to learn more about them.
    - Examples: 
        - MakeProject package
        - SppDistMonProj:: dir_create()


---
# Organizing an ![:scale 7%](images/Rlogo.svg) project 

### <i class="fas  fa-file-signature "></i> Decide on a standardized file naming convention

.pull-left[
- Call files what they are
- Keep names short
- Avoid spaces and $pec!@l characters
- If dates are used, use YYYYMMDD
- Decide on a standard

Allows you to programmatically filter files:

```r
# Exclude files with 2016 or 2017 in their names
f &lt;- list.files(path = "./filepath", 
*               pattern = "[^2016|2017].csv$")

# Load these files
dat &lt;- lapply(f, read.csv)
```
]

.pull-right[
![Allison Horst](https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/other-stats-artwork/coding_cases.png)
]


???
Data managers might tell you that it doesn't matter what you name your files, as long as they are full documented and archived. Although descriptive file names might be required for data management, there are advantages to having a standardized file naming convention for R project management. Descriptive file names are an important part of organizing, sharing, and keeping track of data files.

Some general guidance includes: call files what they are, keep file names short, avoid spaces and special characters (which might not play well with some software), use a standard for dates such as ISO 8601. 

Deciding on a standard and using it for everything is a good approach. The figure on the right shows a few common naming standards, such as camel case and snake case.

Sticking to a standard allows you to do things in R that would be difficult otherwise, such as programmically filter files. For example, the code at the bottom imports a list of data files but excluded those containing 2016 or 2017.  


---
# Organizing an ![:scale 7%](images/Rlogo.svg) project 

### <i class="fas  fa-book "></i> Consult a style guide

*"Good coding style is like correct punctuation: you can manage without it, butitsuremakesthingseasiertoread"*  
*-[Hadley Wickham](https://style.tidyverse.org/index.html)*

.pull-left[
- Strive for consistent and meaningful names

- Review existing style guides:
  - [tidyverse style guide](https://style.tidyverse.org/)
  - [Advanced R style guide](http://adv-r.had.co.nz/Style.html)
  - [Google's R style guide](https://google.github.io/styleguide/Rguide.html)

- Helpful R packages:
  - [`styler`](https://www.tidyverse.org/blog/2017/12/styler-1.0.0/) 
  - [`lintr`](https://cran.r-project.org/web/packages/lintr/index.html)
]

.pull-right[

```r
# R code readability

if(readability()) {
  be_happy()
} else {
  rewrite_code()
}
```
]

???

In addition deciding on a standardized file naming convention during the planning step, we should think about settling on a consistent coding syntax, such as object names, spacing, long lines, assignments, comments. Again, this is not a requirement for good data management and you can manage without it, but it sure makes things easier to read. Do it for your future self and anyone else that has to read through your code.

A good starting place is to consult a style guide. There are a number of them out there, but I list a few of the more popular ones for R. 

If you are past the planning stage and are struggling to make sense of ugly code, there are an R package called `styler` that has functions to read through and clean up code to a standard of your chosing. Another package called `lintr` will perform on the fly checking to confirm that you are conforming to the style guide. Links to more information are included here.

I'll talk about in more detail on the next slide. 
 
 
---
# [`styler`](https://github.com/r-lib/styler) package

.pull-left[
Some messy code <i class="fas  fa-flushed " style="color:grey;"></i>

.small[



&lt;code class ='r hljs remark-code'&gt;p =dat%&gt;%#&lt;span style='color:blue'&gt;a comment&lt;/span&gt;&lt;br&gt;&lt;span style='background-color:pink'&gt;select&lt;/span&gt;(refuge ,lat, long) %&gt;%&lt;span style='background-color:pink'&gt;filter&lt;/span&gt;(refuge!='kodiak ')%&gt;%&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:pink'&gt;ggplot&lt;/span&gt;(data,aes(x =lat,y= long,group=refuge))%&gt;% &amp;nbsp;&lt;span style='background-color:pink'&gt;geom_line&lt;/span&gt;()#&lt;span style='color:blue'&gt;comment without space&lt;/span&gt;"&lt;/code&gt;
]
]


???


---
# [`styler`](https://github.com/r-lib/styler) package

.pull-left[
Some messy code <i class="fas  fa-flushed " style="color:grey;"></i>

.small[



&lt;code class ='r hljs remark-code'&gt;p =dat%&gt;%#&lt;span style='color:blue'&gt;a comment&lt;/span&gt;&lt;br&gt;&lt;span style='background-color:pink'&gt;select&lt;/span&gt;(refuge ,lat, long) %&gt;%&lt;span style='background-color:pink'&gt;filter&lt;/span&gt;(refuge!='kodiak ')%&gt;%&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:pink'&gt;ggplot&lt;/span&gt;(data,aes(x =lat,y= long,group=refuge))%&gt;% &amp;nbsp;&lt;span style='background-color:pink'&gt;geom_line&lt;/span&gt;()#&lt;span style='color:blue'&gt;comment without space&lt;/span&gt;"&lt;/code&gt;
]
]

.pull-right[
The `style_text()` function cleans it up! <i class="fas  fa-smile-beam " style="color:grey;"></i>
.small[



&lt;code class ='r hljs remark-code'&gt;library(&lt;span style='background-color:#ffff7f'&gt;styler&lt;/span&gt;)&lt;br&gt;&lt;br&gt;style_text("p =dat%&gt;%#&lt;span style='color:blue'&gt;a comment&lt;/span&gt;&lt;br&gt;&lt;span style='background-color:pink'&gt;select&lt;/span&gt;(refuge ,lat, long) %&gt;%&lt;span style='background-color:pink'&gt;filter&lt;/span&gt;(refuge!='kodiak ')%&gt;%&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:pink'&gt;ggplot&lt;/span&gt;(data,aes(x =lat,y= long,group=refuge))%&gt;% &amp;nbsp;&lt;span style='background-color:pink'&gt;geom_line&lt;/span&gt;()#&lt;span style='color:blue'&gt;comment without space&lt;/span&gt;")&lt;/code&gt;

```

p &lt;- dat %&gt;% # a comment
  select(refuge, lat, long) %&gt;%
  filter(refuge != "kodiak ") %&gt;%
  ggplot(data, aes(x = lat, y = long, group = refuge)) %&gt;%
  geom_line() # comment without space

```
]
]

???


---
# <i class="fas  fa-people-carry "></i> Project portability


.pull-left-30[
Maintaining dependencies can be frustrating!

An R project should be: 

1. **Isolated**
2. **Portable**
3. **Reproducible**

There are R tools to help with this:
- [`packrat`](https://rstudio.github.io/packrat/) package
- `rocker` package
]

.pull-right-70[
![:scale 100%](images/package-hell.png)
]


???
Ideally, a data project should be isolated, portable and reproducible.

To be isolated mean that: 
  - Installing a new or updated package for one project won’t break your other projects, and vice versa. That’s because packrat gives each project its own private package library.

To be portable means that: 
  - it should be easy to transport your projects from one computer to another, even across different platforms. Packrat makes it easy to install the packages your project depends on.

To be reproducible means that:
  - It is clear to everyone which software versions are required to successfully rerun code. When new versions come out, they might not be backward compatible. Certain functions might no longer be available. Packrat records the exact package versions you depend on, and ensures those exact versions are the ones that get installed wherever you go.

- Available tools:
  - packrat
  - rocker
    - Docker is a program that allows to manipulate (launch and stop) multiple operating systems (called containers) on your machine (your machine will be called the host).
    - you can use older versions of a package for a specific task, while still keeping the package on your machine up-to-date.


---
# ![:scale 8%](images/packrat_logo.png)

.pull-left[
Option 1: Add to a new project

![](images/packrat_rstudio.PNG)
]

.pull-right[
Option 2: Add to an existing project

.small[



&lt;code class ='r hljs remark-code'&gt;# Install packrat&lt;br&gt;&lt;span style='background-color:pink'&gt;install.packages('packrat')&lt;/span&gt;&lt;br&gt;&lt;br&gt;# Set up your project to use packrat&lt;br&gt;packrat::&lt;span style='background-color:#ffff7f'&gt;init()&lt;/span&gt;&lt;/code&gt;
]

.small[



&lt;code class ='r hljs remark-code'&gt;# Install required packages&lt;br&gt;install.packages('tidyverse')&lt;br&gt;&lt;br&gt;# Take a snapshot to save the changes to packrat&lt;br&gt;packrat::&lt;span style='background-color:#ffff7f'&gt;snapshot()&lt;/span&gt;&lt;/code&gt;
]
]

???


---
background-image: url("images/version_control.png")
background-size: 55%
background-position: 95% 70%
# <i class="fas  fa-code-branch "></i> Version control 

.pull-left-30[
&lt;br&gt;
&lt;br&gt;
.center[
.large[Consider how you will manage versions when ***planning*** your project!]
]
]

???
Version control is the processes and tools designed to keep track of multiple different versions of data, including data products. It can be as simple as renaming the updated files to as complex as a distributed version control system like Git. Whatever the level of complexity, it is important to consider what version control system that a project will be using during the *planning stage*.  

---
# <i class="fas  fa-code-branch "></i> Version control 

.pull-left[
- Benefits of a version control system
    - Collaboration
    - Storing versions
    - Restoring versions
    - Understanding what happened
    - Backup

- RStudio makes version control with Git and GitHub easier. 

- References
  - Resources to learn git [(link)](https://try.github.io/)
  - Using git from RStudio [(link)](https://nceas.github.io/oss-lessons/version-control/4-getting-started-with-git-in-RStudio.html)
  - GitHub and R: An Intro for FWS Biologists [(link)](https://mccrea-cobb.github.io/r-github-presentation/#1)
]

.pull-right[
![:scale 60%](images/git_logo.png)
.center[![:scale 40%](images/github.svg)]
.center[![:scale 40%](images/github-logo.png)]
]


???


---
class: center, middle, hide-logo

&lt;video controls autoplay width="1200"&gt;
  &lt;source src="images/clone_repo.mp4" type="video/mp4"&gt;
&lt;/video&gt;

???
- Version control is.. 
- You should consider how you will be managing the version history of your work during the planning stage.
- Git is a popular version control software and GitHub is a companion website.
  - Allows for collaboration as well.
- GitHub is popular with R users because it interfaces with package development


---
(Adam's slides)


---
class: center, middle, inverse, hide-logo
# Sharing and Archiving

![](images/life_cycles-data_share-archiving.png)


???
Last but not least, I was cover the sharing and archiving steps of the data life cycle.

---
class: center, middle, hide-logo
background-image: url("images/report_about_reporting.jpg")
background-size: contain


???
Or in other words, I will attempt to report about reporting...


---
background-image: url("images/rmarkdown_logo.png")
background-position: 85% 50%
background-size: 40%
# Literate programming

.pull-left-70[
.large[You can generate reports directly  
from RStudio!]

**Allows for:**
- Code to be directly inserted into document
- Multiple outputs
- Easy to use
- Increased reproducibility
- Fewer sources of errors
]


???
As I mentioned earlier, scientific writing and coding were traditionally separate activities. For example, a scientist who wants to use code to generate a figure for her report would have the code for generating that figure in one file and the document itself in another. 

This is a challenge for reproducibility and keeping track of where each piece of data came from and whether it's up-to-date. “Literate programming” provides an alternative approach, whereby code and text are interleaved within a single file, which can be processed by software to produce documents with the output of the code (e.g. figures, tables, and summary statistics) automatically interwoven with the document’s body text. A common literate programming file format in R is call RMarkdown

Unlike cumbersome word processing applications, text written in Markdown can be easily shared between computers, mobile phones, and people. It’s quickly becoming the writing standard for academics and scientists. This approach has several advantages. For one, the code output of a literate programming document is by definition guaranteed to be consistent with the code in the document’s source. At the same time, literate programming can make it easier to develop analyses by reducing the separation between writing and coding.


---
class: middle, center
background-image: url("images/rmarkdown_wizards.png")
background-size: contain


???
How does it work? Well, unless you really want to get into the weeds...given our time constrainst today, let's just say that it's like magic! As shown here, you start by adding text and what's called "chunks" of code to an Rmarkdown document. You then what's called "knit" the file by running the `knit` function or clicking the `knit` button in RMarkdown. Magic happens and you can celebrate the percieved wizardy. A document is produced in the file format of your choosing, generally html, Word, or PDF.


---
# ![:scale 5%](images/rmarkdown_logo.png) The YAML header


```r
---
title: "My report"
author: "McCrea Cobb"
date: "6/24/2020"
output: pdf_document
---
```


???
So what does an RMarkdown file contain? There are two required sections: a header and the main body. As shown here, a simple header (written in YAML- Yet Another Markup Language) generally contains some metadata and the desired file output. 


---
# ![:scale 5%](images/rmarkdown_logo.png) A more complex header

.smaller[



&lt;code class ='r hljs remark-code'&gt;---&lt;br&gt;title: |&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| ![](usfws_refuges_logos.png){width=5cm}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| \LARGE Region 4 Inventory and Monitoring Branch &lt;br&gt;subtitle: |&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| \Large Mobile Acoustical Bat Monitoring&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| \Large Annual Summary Report&lt;br&gt;author: '`r &lt;span style='background-color:#ffff7f'&gt;params&lt;/span&gt;$year`'&lt;br&gt;date: '`r &lt;span style='background-color:#ffff7f'&gt;params&lt;/span&gt;$station`'&lt;br&gt;output:&lt;br&gt;&amp;nbsp;&amp;nbsp;pdf_document:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;includes:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;in_header: MABM_report_preamble.tex&lt;br&gt;urlcolor: blue&lt;br&gt;&lt;span style='background-color:#ffff7f'&gt;params&lt;/span&gt;:&lt;br&gt;&amp;nbsp;&amp;nbsp;year: 0 # placeholder &lt;br&gt;&amp;nbsp;&amp;nbsp;station: placeholder&lt;br&gt;&amp;nbsp;&amp;nbsp;stn_start_yr: 0 # placeholder&lt;br&gt;&amp;nbsp;&amp;nbsp;route_path: placeholder&lt;br&gt;&amp;nbsp;&amp;nbsp;survey_path: placeholder&lt;br&gt;&amp;nbsp;&amp;nbsp;bat_path: placeholder&lt;br&gt;&amp;nbsp;&amp;nbsp;spp_path: placeholder&lt;br&gt;&amp;nbsp;&amp;nbsp;out_dir: placeholder&lt;br&gt;&amp;nbsp;&amp;nbsp;goog_API_key: placeholder&lt;br&gt;---&lt;/code&gt;
]

???
Header can get more complex as the document gets more customized. This one includes input parameters (`params`) that allow the user to customize the content of the report based on their input values. In this report, the user select the year of data and refuge station on which to generate a report.


---
.pull-left[
.small[
`####` Some Rmarkdown code

This is an `**`R Markdown`**` document. You can write inline code like this: 1 + 1 = `` `r
1 + 1` ``.

You can embed an R code chunk like this:

    ```{r eval=TRUE, echo=FALSE}
    DT::datatable(iris[1:3], 
                  rownames = FALSE,
                  options = list(pageLength = 3))
    ```

`####` Including Figures

You can also embed figures, for example:

    ```{r, eval=TRUE, echo=FALSE}
    library(leaflet)

    leaflet() %&gt;%
      addTiles() %&gt;%
      addMarkers(lng = 174.768, 
                 lat = -36.852, 
                 popup = "The birthplace of R")
    ```

]
]


???
The meat of the report happens in the main body of an RMarkdown document. As I mentioned earlier, the main body, as shown here, is a combination of text written in markdown format and embedded R code that are either included as distinct chunks surrounded by three backticks or in-line surrounded by one backtick. 


---
.pull-left[
.small[
`####` Some Rmarkdown code

This is an `**`R Markdown`**` document. You can write inline code like this: 1 + 1 = `` `r
1 + 1` ``.

You can embed an R code chunk like this:

    ```{r eval=TRUE, echo=FALSE}
    DT::datatable(iris[1:3], 
                  rownames = FALSE,
                  options = list(pageLength = 3))
    ```

`####` Including Figures

You can also embed figures, for example:

    ```{r, eval=TRUE, echo=FALSE}
    library(leaflet)

    leaflet() %&gt;%
      addTiles() %&gt;%
      addMarkers(lng = 174.768, 
                 lat = -36.852, 
                 popup = "The birthplace of R")
    ```

]
]

.pull-right[
.small[
#### Some Rmarkdown code
This is an **R Markdown** document. You can write inline code like this: 1 + 1 = 2.

You can embed an R code chunk like this:
]

.smaller[
<div id="htmlwidget-c88366206449d31f7b46" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-c88366206449d31f7b46">{"x":{"filter":"none","data":[[5.1,4.9,4.7,4.6,5,5.4,4.6,5,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5,5,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5,5.5,4.9,4.4,5.1,5,4.5,4.4,5,5.1,4.8,5.1,4.6,5.3,5,7,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5,5.9,6,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6,5.7,5.5,5.5,5.8,6,5.4,6,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],[3.5,3,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3,3,4,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3,3.4,3.5,2.3,3.2,3.5,3.8,3,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2,3,2.2,2.9,2.9,3.1,3,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3,2.8,3,2.9,2.6,2.4,2.4,2.7,2.7,3,3.4,3.1,2.3,3,2.5,2.6,3,2.6,2.3,2.7,3,2.9,2.9,2.5,2.8,3.3,2.7,3,2.9,3,3,2.5,2.9,2.5,3.6,3.2,2.7,3,2.5,2.8,3.2,3,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3,2.8,3,2.8,3.8,2.8,2.8,2.6,3,3.4,3.1,3,3.1,3.1,3.1,2.7,3.2,3.3,3,2.5,3,3.4,3],[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5,1.5,1.6,1.4,1.1,1.2,1.5,1.3,1.4,1.7,1.5,1.7,1.5,1,1.7,1.9,1.6,1.6,1.5,1.4,1.6,1.6,1.5,1.5,1.4,1.5,1.2,1.3,1.4,1.3,1.5,1.3,1.3,1.3,1.6,1.9,1.4,1.6,1.4,1.5,1.4,4.7,4.5,4.9,4,4.6,4.5,4.7,3.3,4.6,3.9,3.5,4.2,4,4.7,3.6,4.4,4.5,4.1,4.5,3.9,4.8,4,4.9,4.7,4.3,4.4,4.8,5,4.5,3.5,3.8,3.7,3.9,5.1,4.5,4.5,4.7,4.4,4.1,4,4.4,4.6,4,3.3,4.2,4.2,4.2,4.3,3,4.1,6,5.1,5.9,5.6,5.8,6.6,4.5,6.3,5.8,6.1,5.1,5.3,5.5,5,5.1,5.3,5.5,6.7,6.9,5,5.7,4.9,6.7,4.9,5.7,6,4.8,4.9,5.6,5.8,6.1,6.4,5.6,5.1,5.6,6.1,5.6,5.5,4.8,5.4,5.6,5.1,5.1,5.9,5.7,5.2,5,5.2,5.4,5.1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Sepal.Length<\/th>\n      <th>Sepal.Width<\/th>\n      <th>Petal.Length<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":3,"columnDefs":[{"className":"dt-right","targets":[0,1,2]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[3,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
]

.small[
#### Including Figures

You can also embed figures, for example:

<div id="htmlwidget-9736597669a804f6fcc9" style="width:432px;height:144px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-9736597669a804f6fcc9">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[-36.852,174.768,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"The birthplace of R",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-36.852,-36.852],"lng":[174.768,174.768]}},"evals":[],"jsHooks":[]}</script>
]
]


???
When the file is knitted, the result is a document that includes the text and the output of the R code. In this example, the R code chunk produced a table and a map. The in-line code calculated a value (1 + 1).


---

&lt;embed src="./images/rmarkdown_report.pdf" width="100%" height="100%" type="application/pdf" /&gt;


???
Here's an example of an RMarkdown PDF report that is automatically generated every week to summarize GPS collar data for quality control. As data regularly upload from the collars to the satellites to servers, the tables and figures in the report are also updated.


---
# ![:scale 5%](images/xaringan_logo.png) Presentations 

.center[![:scale 80%](images/rmarkdown_presentation.png)]

???
As mentioned earlier, Rmarkdown documents can be rendered into multiple different formats.
You can even create presentations, such as the one that you are looking at right now!


---
background-image: url("images/shiny.png")
background-position: 90% 50%
background-size: 40%
# Web applications 

&lt;br&gt;
.pull-left[
.large[
- Build interactive web apps from R

- Host standalone apps online

- Embed them in RMarkdown docs
]
]

???
You can also generate interactive content from R, such as websites and dashboards. The Shiny package allows for these, which can also be imbedded into Rmarkdown outputs.

Shiny is an R package that provides a framework for building interactive applications using R, without HTML, CSS, or JavaScript knowledge.

You can host standalone apps as webpages, or embed them in rmarkdown documents


---
class: center, middle, hide-logo

&lt;video controls autoplay width="1200"&gt;
  &lt;source src="images/collar_viewer.mp4" type="video/mp4"&gt;
&lt;/video&gt;


???
Here's an example of a shiny app in action. In this example, the user pulls the shiny app from GitHub and runs it locally. After providing data, the app maps GPS collar data, in this case from lynx in Alaska. The user can than select a subset of GPS collars, create home ranges, and do thing like measure the diameter of the home range.


---


&lt;iframe src="https://vac-lshtm.shinyapps.io/ncov_tracker/?_ga=2.142693877.1775727125.1591996474-181506872.1532128536)" width="100%" height="600px"&gt;&lt;/iframe&gt;



???

---
background-image:url("images/cher_data.jpg")
background-position: 50% 80%
# <i class="fas  fa-file-archive "></i> Archiving 


???
Ok, now for the final and arguably the most important step that is often overlooked in the data life cycle: archiving. For the typical scientific data project, this should the raw data and the code required to reproduce the results.

Typically the process to do this is to visit a repository website and then manually upload data and metadata.
Our take home here, is that if you are using R, it is possible for you can include code to save your data and products in a remote secure repository.
- For example, instead of manually opening ServCat and saving your reports to as a product in a ServCat record, it is possible to use R code to save results to ServCat. 
- This is an active area of development.
- I encourage you to reach out to your data managers and ServCat managers to look into this more.


---
background-image:url("images/cher_data.jpg")
background-position: 50% 80%
# <i class="fas  fa-file-archive "></i> Archiving 

.center[![:gen 35%, shadow](images/we_can_do_it_in_r.png)]


???
It is possible to do this manual step programmically in R!

Just as Adam discussed about R's ability to *access* data from remote repositories, the opposite is also true; R code can also be used to *save* your data and products to a remote secure repository.

- Although it is possible to use web services to get, put and delete data in a remote repository, this is often not straightforward. - For example, instead of manually opening ServCat and saving your reports to as a product in a ServCat record, it is *possible* to use R code to save results to ServCat. Emphasis on "possible".

To aid in this process, custom R packages have been built to access and archive scientific data repositories, such as ScienceBase. These make it much easier to use the repositories web services.

This is an active area of development. I encourage you to reach out to your data managers and ServCat managers to look into this more option for your repository of interest.

Today I was cover an example of an R package called `sbtools` that was developed for interfacing R with data services from ScienceBase, the USGS data repository.


---
# ![:scale 5%](images/sciencebase_logo.png) [`sbtools`](https://journal.r-project.org/archive/2016-1/winslow-chamberlain-appling-etal.pdf) 

.pull-left[
The tool to allow complete access to the USGS ScienceBase API from R. It supports the creation, editing and access of data/metadata:

.small[

&lt;code class ='r hljs remark-code'&gt;library(&lt;span style='background-color:pink'&gt;sbtools&lt;/span&gt;)&lt;br&gt;&lt;br&gt;# Create new item (record), by default under "My Items" parent&lt;br&gt;new_item &lt;- &lt;span style='background-color:#ffff7f'&gt;item_create&lt;/span&gt;(title = "new test item")&lt;/code&gt;
]
]

.pull-right[
![](images/sciencebase.PNG)
]


???
`sbtools` enables direct access to the advanced online data functionality provided by ScienceBase, the U.S. Geological Survey’s online scientific data storage platform.
- Provides scripted R access to ScienceBase to manage metadata and data files, to search the catalog of datasets, and to view and modify data in formats familiar to R users.


---
# ![:scale 5%](images/sciencebase_logo.png) [`sbtools`](https://journal.r-project.org/archive/2016-1/winslow-chamberlain-appling-etal.pdf) 

.pull-left[
The tool to allow complete access to the USGS ScienceBase API from R. It supports the creation, editing and access of data/metadata:

.small[

&lt;code class ='r hljs remark-code'&gt;library(&lt;span style='background-color:pink'&gt;sbtools&lt;/span&gt;)&lt;br&gt;&lt;br&gt;# Create new item (record), by default under "My Items" parent&lt;br&gt;new_item &lt;- &lt;span style='background-color:#ffff7f'&gt;item_create&lt;/span&gt;(title = "new test item")&lt;/code&gt;
]

Once an item is created, an authenticated user can edit the metadata or attach data files to that item:

.small[

&lt;code class ='r hljs remark-code'&gt;# Give the item a new title&lt;br&gt;edited_item &lt;- &amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;item_update&lt;/span&gt;(new_item, list(title = "new updated item"))&lt;br&gt;&lt;br&gt;# Append data to the item&lt;br&gt;&lt;span style='background-color:#ffff7f'&gt;item_list_files&lt;/span&gt;(new_item)&lt;/code&gt;
]
]

.pull-right[
![](images/sciencebase.PNG)
]


???
`sbtools` enables direct access to the advanced online data functionality provided by ScienceBase, the U.S. Geological Survey’s online scientific data storage platform.
- Provides scripted R access to ScienceBase to manage metadata and data files, to search the catalog of datasets, and to view and modify data in formats familiar to R users.


---
# ![:scale 5%](images/sciencebase_logo.png) [`sbtools`](https://journal.r-project.org/archive/2016-1/winslow-chamberlain-appling-etal.pdf) - Accessing data


&lt;code class ='r hljs remark-code'&gt;# Access the record&lt;br&gt;test_item &lt;- &lt;span style='background-color:#ffff7f'&gt;item_get&lt;/span&gt;("572a2a7fe4b0b13d391a0f6c")&lt;br&gt;&lt;br&gt;# Take a look at the citation&lt;br&gt;test_item&lt;/code&gt;

```

&lt;ScienceBase Item&gt; 
  Title: Moose population survey: Tetlin National Wildlife Refuge, Game Management Unit 12, eastern Alaska
  Creator/LastUpdatedBy:      / 
  Provenance (Created / Updated):  2016-05-04T16:59:43Z / 2016-11-29T21:04:15Z
  Children: FALSE
  Item ID: 572a2a7fe4b0b13d391a0f6c
  Parent ID: 5771b40fe4b07657d1a6bb5e

```


???


---

&lt;style&gt;
.leaflet {
    margin: auto;
}
&lt;/style&gt;

.small[




&lt;code class ='r hljs remark-code'&gt;library(&lt;span style='background-color:#ffff7f'&gt;leaflet&lt;/span&gt;)&lt;br&gt;&lt;br&gt;# Get study area boundaries&lt;br&gt;study_area &lt;- &lt;span style='background-color:#ffff7f'&gt;item_get_wfs&lt;/span&gt;(test_item)&lt;br&gt;&lt;br&gt;# Map it&lt;br&gt;&lt;span style='background-color:#ffff7f'&gt;leaflet&lt;/span&gt;() &lt;span style='background-color:pink'&gt;%&gt;%&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;addPolygons(data = study_area@polygons[[1]], &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;label = study_area$PopupInfo) &lt;span style='background-color:pink'&gt;%&gt;%&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;addTiles()&lt;/code&gt;


<div id="htmlwidget-438f45824568a0d5d9b6" style="width:720px;height:360px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-438f45824568a0d5d9b6">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addPolygons","args":[[[[{"lng":[-143.347991534,-143.228078123,-143.199521918,-143.122167375,-143.127109304,-143.198748868,-143.19378802,-143.229359705,-143.135073488,-143.078102266,-143.022414244,-142.99961064,-142.938665511,-142.843148631,-142.747251927,-142.688158016,-142.606909556,-142.591831249,-142.538758172,-142.416502074,-142.513136336,-142.440431435,-142.419714378,-142.139856192,-142.122260562,-142.079156323,-141.92258779,-141.918415775,-141.807245102,-141.742410732,-141.303569208,-141.282765721,-141.243599672,-141.174415326,-141.160249355,-141.079508421,-141.001773206,-140.994491425,-141.122555042,-141.232872959,-141.299849381,-141.388141605,-141.459216617,-141.541904316,-141.621384427,-141.666340145,-141.698119294,-141.68562115,-141.806637894,-141.924937519,-142.036132479,-141.986010868,-141.939892566,-141.990490604,-142.038438439,-142.068433621,-142.027118846,-141.961758042,-142.016839952,-142.049916116,-142.086205609,-142.190932214,-142.237634019,-142.234596278,-142.278523974,-142.276640753,-142.37659465,-142.512840519,-142.614390635,-142.705624508,-142.730105945,-142.847950339,-142.833787131,-142.811967361,-142.863114021,-142.959188601,-143.122713746,-143.283993166,-143.40724688,-143.455367327,-143.476311641,-143.511921879,-143.561225275,-143.64103108,-143.682506652,-143.725921397,-143.79857264,-143.834193846,-143.886227382,-143.979085435,-143.83522869,-143.734763013,-143.647338789,-143.669549739,-143.722476467,-143.714254457,-143.625932159,-143.582772384,-143.547696884,-143.502471311,-143.411813963,-143.38841452,-143.347026732,-143.301357003,-143.274342586,-143.279132863,-143.253884987,-143.243979313,-143.210630609,-143.19251129,-143.163194589,-143.241187738,-143.249712184,-143.317999267,-143.323203966,-143.358665087,-143.364054431,-143.372525819,-143.300558365,-143.240920644,-143.341745994,-143.378612129,-143.412538622,-143.464966854,-143.548860655,-143.503149306,-143.464119952,-143.464630309,-143.528824232,-143.61510396,-143.716758675,-143.646118397,-143.638756282,-143.70155483,-143.777700065,-143.86044888,-143.984989613,-144.046538598,-144.254544831,-144.225165367,-144.253642765,-144.301559405,-144.36816241,-144.465211351,-144.571191338,-144.529242495,-144.455767064,-144.333686004,-144.228967269,-144.092966294,-144.028391194,-144.061331524,-144.137068531,-144.158313061,-144.07957263,-143.978928344,-143.857762328,-143.740326127,-143.748368311,-143.712091459,-143.632585954,-143.653709154,-143.606609546,-143.467727062,-143.347991534],"lat":[63.7616274790001,63.7571575680001,63.7342614510001,63.7146903400001,63.668894019,63.6284448650001,63.5976204350001,63.5637357470001,63.5375116920001,63.5392432680001,63.5227209220001,63.5070318840001,63.5088318050001,63.497059409,63.5106815170001,63.495974652,63.4673455280001,63.4459835710001,63.44378678,63.3846471730001,63.343639443,63.3177921930001,63.2834422450001,63.2518373340001,63.2046232710001,63.2165666870001,63.190964713,63.1507797510001,63.125712972,63.1655757130001,63.1909519420001,63.1272911720001,63.0441622610001,63.036298145,63.0055383420001,63.001459835,63.024515131,61.506026326,61.5129688100001,61.5227397950001,61.5107513470001,61.511642957,61.5218236530001,61.510148121,61.482539036,61.4479293430001,61.4254246660001,61.3930256400001,61.369824592,61.354555707,61.4104825160001,61.455304416,61.479714947,61.504635874,61.525168073,61.5499287100001,61.5760944090001,61.599783002,61.6501588100001,61.675405541,61.674583795,61.732069154,61.7685801910001,61.7888348450001,61.8140133540001,61.8323650710001,61.83834877,61.850661335,61.9016429660001,61.8814334780001,61.855572673,61.835179204,61.8070562190001,61.773966897,61.7171774700001,61.7076220440001,61.7279696370001,61.7442388860001,61.7211886470001,61.7369208900001,61.7619436670001,61.7924853660001,61.8018722750001,61.813991641,61.8360162330001,61.866633279,61.8873552000001,61.9227740540001,61.938690406,61.995083885,61.9747243130001,61.988689364,62.0165049880001,62.0705015730001,62.130935611,62.1987362830001,62.22690751,62.226316963,62.2618906590001,62.277290776,62.2664497910001,62.254531634,62.2601356600001,62.2500367960001,62.269839162,62.289646453,62.3041079880001,62.3399065350001,62.342865536,62.3670206240001,62.404338308,62.406424095,62.4445731260001,62.4617973430001,62.4874572310001,62.517444352,62.5637609760001,62.618160883,62.639066707,62.6465213320001,62.676490346,62.709080768,62.7288283760001,62.7618611290001,62.775214056,62.807096179,62.817727242,62.8451542620001,62.8557921870001,62.8829234580001,62.9102723340001,62.9526627710001,63.001693043,63.01682544,63.051695517,63.0555396390001,63.0573769750001,63.0395419710001,63.0665577820001,63.1190678130001,63.1342032650001,63.1305856130001,63.1672604450001,63.189720042,63.215793192,63.2519489310001,63.2762887920001,63.302940354,63.3088479370001,63.3102552060001,63.3388752870001,63.3697082020001,63.3989751660001,63.4394820480001,63.4720371180001,63.4951432560001,63.4995182150001,63.4924478020001,63.5124705160001,63.5598353490001,63.601049904,63.646614346,63.6832923640001,63.7068998140001,63.7616274790001]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,["GMU 12Z","Tetlin NWR"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]}],"limits":{"lat":[61.354555707,63.7616274790001],"lng":[-144.571191338,-140.994491425]}},"evals":[],"jsHooks":[]}</script>
]

???


---
class: center, middle, hide-logo
background-image: url("images/demo_thinking.jpg")
background-size: cover


???
Time for the demo.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros/macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<style>
.logo {
  background-image: url(images/fws-logo.png);
  background-size: contain;
  background-repeat: no-repeat;
  position: absolute;
  bottom: 0.5em;
  left: 0.5em;
  width: 100px;
  height: 60px;
  z-index: 0;
}
</style>

<script>
document
  .querySelectorAll(
    '.remark-slide-content' +
    ':not(.title-slide)' +
    // add additional classes to exclude here, e.g.
    // ':not(.inverse)' +
    ':not(.hide-logo)'
  )
  .forEach(el => {
    el.innerHTML += '<div class="logo"></div>';
  });
</script>

<style>
.github {
  background-image: url(https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149);
  background-size: contain;
  background-repeat: no-repeat;
  position: absolute;
  top: 0em;
  right: 0em;
  width: 100px;
  height: 100px;
  z-index: 0;
  
}
</style>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
